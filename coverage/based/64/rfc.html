
<!doctype html>
<html lang="en">
  <head>
    <title>Code coverage report for rfc</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../style/reset.css">
    <link rel="stylesheet" href="../../style/style.css">
  </head>
  <body>
   <div id="page-container">
      <header>
        <nav>
          
<ul class="inline-list">
    <li>
      <a href="../../index.html">All Files</a> /
    </li>
    <li>
      <a href="../index.html">based</a> /
    </li>
    <li>
      <a href="./index.html">64</a> /
    </li>

  <li>rfc.lua</li>
</ul>

        </nav>
      </header>

      <main>
        <header class="hit-miss-statistics">
          
<ul class="inline-list">
  <li>
    <span class="strong">100.00%</span>
    <span class="quiet">Rate</span>
  </li>
  <li>
    <span class="strong">26</span>
    <span class="quiet">Hits</span>
  </li>
  <li>
    <span class="strong">0</span>
    <span class="quiet">Missed</span>
  </li>
</ul>

<div class="hit-percentage-status hit-percentage-status-high"></div>

        </header>
        <section id="content">
          
  <section class="file-coverage">

    <ul class="line-numbers undecorated">
        <li>1</li>
        <li>2</li>
        <li>3</li>
        <li>4</li>
        <li>5</li>
        <li>6</li>
        <li>7</li>
        <li>8</li>
        <li>9</li>
        <li>10</li>
        <li>11</li>
        <li>12</li>
        <li>13</li>
        <li>14</li>
        <li>15</li>
        <li>16</li>
        <li>17</li>
        <li>18</li>
        <li>19</li>
        <li>20</li>
        <li>21</li>
        <li>22</li>
        <li>23</li>
        <li>24</li>
        <li>25</li>
        <li>26</li>
        <li>27</li>
        <li>28</li>
        <li>29</li>
        <li>30</li>
        <li>31</li>
        <li>32</li>
        <li>33</li>
        <li>34</li>
        <li>35</li>
        <li>36</li>
        <li>37</li>
        <li>38</li>
        <li>39</li>
        <li>40</li>
        <li>41</li>
        <li>42</li>
        <li>43</li>
        <li>44</li>
        <li>45</li>
        <li>46</li>
        <li>47</li>
        <li>48</li>
        <li>49</li>
        <li>50</li>
        <li>51</li>
        <li>52</li>
        <li>53</li>
        <li>54</li>
        <li>55</li>
        <li>56</li>
        <li>57</li>
        <li>58</li>
    </ul>

    <ul class="line-coverages undecorated">
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-hit">1x</li>
        <li class="line-empty">
</li>
        <li class="line-hit">1x</li>
        <li class="line-empty">
</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">1x</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">11x</li>
        <li class="line-hit">11x</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-hit">1x</li>
        <li class="line-hit">11x</li>
        <li class="line-empty">
</li>
        <li class="line-hit">11x</li>
        <li class="line-hit">4x</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-hit">11x</li>
        <li class="line-empty">
</li>
        <li class="line-empty">
</li>
        <li class="line-hit">1x</li>
    </ul>

    <ul class="code undecorated">
        <li class="line-empty">--- Implements RFC 4648 Base64</li>
        <li class="line-empty">
</li>
        <li class="line-hit">local generic = require &#39;based.64.generic&#39;</li>
        <li class="line-empty">
</li>
        <li class="line-hit">local rfc = {}</li>
        <li class="line-empty">
</li>
        <li class="line-hit">rfc.encode_lookup = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+&#47;&quot;</li>
        <li class="line-hit">rfc.decode_lookup = {</li>
        <li class="line-hit">	 nil,  nil,  nil,  nil,  nil,  nil,  nil,  nil,</li>
        <li class="line-empty">	 nil,  nil,  nil,  nil,  nil,  nil,  nil,  nil,</li>
        <li class="line-empty">	 nil,  nil,  nil,  nil,  nil,  nil,  nil,  nil,</li>
        <li class="line-empty">	 nil,  nil,  nil,  nil,  nil,  nil,  nil,  nil,</li>
        <li class="line-empty">	 nil,  nil,  nil,  nil,  nil,  nil,  nil,  nil,</li>
        <li class="line-hit">	 nil,  nil, 0x3e,  nil,  nil,  nil, 0x3f, 0x34,</li>
        <li class="line-hit">	0x35, 0x36, 0x37, 0x38, 0x39, 0x3a, 0x3b, 0x3c,</li>
        <li class="line-hit">	0x3d,  nil,  nil,  nil,  nil,  nil,  nil,  nil,</li>
        <li class="line-hit">	0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,</li>
        <li class="line-hit">	0x08, 0x09, 0x0a, 0x0b, 0x0c, 0x0d, 0x0e, 0x0f,</li>
        <li class="line-hit">	0x10, 0x11, 0x12, 0x13, 0x14, 0x15, 0x16, 0x17,</li>
        <li class="line-hit">	0x18, 0x19,  nil,  nil,  nil,  nil,  nil,  nil,</li>
        <li class="line-hit">	0x1a, 0x1b, 0x1c, 0x1d, 0x1e, 0x1f, 0x20, 0x21,</li>
        <li class="line-hit">	0x22, 0x23, 0x24, 0x25, 0x26, 0x27, 0x28, 0x29,</li>
        <li class="line-hit">	0x2a, 0x2b, 0x2c, 0x2d, 0x2e, 0x2f, 0x30, 0x31,</li>
        <li class="line-hit">	0x32, 0x33</li>
        <li class="line-hit">}</li>
        <li class="line-empty">-- for i = 1, 255 do</li>
        <li class="line-empty">-- 	local position = encode_lookup:find(string.char(i), 1, true)</li>
        <li class="line-empty">-- 	io.write(position and string.format(&quot;0x%02x&quot;, position-1) or &#39; nil&#39;)</li>
        <li class="line-empty">-- 	io.write(i%8==0 and &quot;,\n&quot; or &quot;, &quot;)</li>
        <li class="line-empty">-- end</li>
        <li class="line-empty">
</li>
        <li class="line-empty">--- Encodes a value into URL-Safe Base64.</li>
        <li class="line-empty">-- Supported types are `string` and `number`.</li>
        <li class="line-empty">-- Strings will be encoded byte-wise with padding bits at the end, while</li>
        <li class="line-empty">-- numbers will be encoded all at once with leading zeroes at the start.</li>
        <li class="line-empty">-- @tparam string data A string treated as binary data</li>
        <li class="line-empty">-- @treturn string The Base64 encoded input data</li>
        <li class="line-hit">function rfc.encode(data)</li>
        <li class="line-hit">	local output = generic.encode(rfc.encode_lookup,  data)</li>
        <li class="line-hit">	return output .. string.rep(&quot;=&quot;, (4 - #output) % 4)</li>
        <li class="line-empty">end</li>
        <li class="line-empty">
</li>
        <li class="line-empty">--- Decodes a Base64-encoded value.</li>
        <li class="line-empty">-- @tparam string data Base64 encoded data</li>
        <li class="line-empty">-- @tparam[opt=&quot;string&quot;] string mode Either &#39;string&#39; or &#39;number&#39; to specify what type to decode as</li>
        <li class="line-empty">-- @return The decoded input data</li>
        <li class="line-empty">-- @treturn boolean `true` if the input data was correctly padded, `false` otherwise</li>
        <li class="line-hit">function rfc.decode(data, mode)</li>
        <li class="line-hit">	local first_pad = data:find(&quot;=&quot;, 1, true)</li>
        <li class="line-empty">
</li>
        <li class="line-hit">	if first_pad then</li>
        <li class="line-hit">		data = data:sub(1, first_pad - 1)</li>
        <li class="line-empty">	end</li>
        <li class="line-empty">
</li>
        <li class="line-hit">	return generic.decode(rfc.decode_lookup, data, mode), #data % 4 == 0</li>
        <li class="line-empty">end</li>
        <li class="line-empty">
</li>
        <li class="line-hit">return rfc</li>
    </ul>

  </section>

        </section>
      </main>

      <footer class="quiet">
        Code coverage generated by <a href="https://keplerproject.github.io/luacov/" target="_blank">LuaCov</a> at 2022-10-09 10:53:02
      </footer>
    </div>
  </body>
</html>
